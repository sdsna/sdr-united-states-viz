<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="libs/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="libs/fontawesome/web-fonts-with-css/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="styles.css">

    <script src="libs/vue/vue.js"></script>
    <script src="libs/vue/vue-router.js"></script>
    <script src="libs/chartjs/Chart.min.js"></script>
    <script src="libs/chartjs-plugin-annotation/chartjs-plugin-annotation.min.js"></script>

    <script src="libs/d3/d3.v4.min.js"></script>
    <script src="https://d3js.org/topojson.v2.min.js"></script>
    <script src="libs/d3/d3-geo-projection.v2.min.js"></script>

    <script>

    var vm = {
      data: [],
      current_index: 3,
      current_iso: '',
      current_sdg: 0,
      current_indicator: 0,
      current_map_sdg: 0,
      view: 'landing',
      search: '',
      country_start_index: 0,
      iso_index: 1,
      current_column: 2,
      sort_by: 'rank',
      sort_sdg: 1,
      sort_direction: 0,
      total_countries: 50,
      countries: {},
      sdgs: {},
      country_column_data: {},
      country_column_data_sdg: {},
      sdg_titles:{
        1: "No poverty",
        2: "Zero hunger",
        3: "Good health and well-being",
        4: "Quality education",
        5: "Gender equality",
        6: "Clean water and sanitation",
        7: "Affordable and clean energy",
        8: "Decent work and economic growth",
        9: "Industry, innovation and infrastructure",
        10: "Reduced inequalities",
        11: "Sustainable cities and communities",
        12: "Responsible consumption and production",
        13: "Climate action",
        14: "Life below water (not available)",
        15: "Life on land",
        16: "Peace, justice and strong institutions",
        17: "Partnership for the goals (not available)"
      },
      loading: true,
      current_iso_hover: '',
      focus: 'map',
      iso_focus: '',
      iso_hover: '',
      breakpoint: ''
      // tooltip: {value:0, name:"", left:'0px', top: '0px', opacity:0}
    }

    </script>

    <script src="data/processed-data.js"></script>
    <script src="states2.js"></script>

    <style>
    .loading{
      background-color: white;
      position: fixed;
      z-index: 9999;
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      margin: auto;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      color: #17a2b8;
    }
    .loader{
      margin: auto;
      width: 112px;
    }
    </style>

    <title>SDG Report of the United States 2018</title>
  </head>
  <body class="">

    <template id="map-vue-template">

        <svg :id="'map' + _uid" :width="width" :height="height"></svg>

    </template>

    <template id="bar-chart-vue-template">

        <canvas :id="'bar-chart-' + _uid" ></canvas>

    </template>

    <template id="polar-chart-vue-template">

      <div>
        <canvas :id="'polar-chart-' + _uid" height="400" class="p-3"></canvas>
        <canvas :id="'polar-chart-labels-' + _uid" class="polar-chart-labels" ></canvas>
      </div>

    </template>

    <template id="sdg-icons-vue-template">

      <div class="sdg-icons">

        <div class="row px-3">
          <div class="col-lg col-custom-9 col-md-2 col-sm-3 col-3 px-1 mb-2"
                v-for="n in 17"
                >

             <div class="sdg-dashboard"
                  :class="'bg-sdg' + n"
                  :style="{opacity: n == sdg || $root.page == 'landing' ? 1 : .2}"
                  v-if="n != 14 && n != 17"
                  v-on:mouseover="tooltipIcon($event,n)"
                  v-on:mouseout="hideTooltipIcon">
                <router-link :to="link(n)"
                             class=""
                             >
                   <img class="img-fluid"
                        :class="{'shadow-sm': sdg == n}"
                        :src="'resources/SDG 2018 dashboards white-' + n + '.png'"
                        alt="" />
                </router-link>
             </div>
             <div class="sdg-dashboard bg-sdg-unavailable"
                  v-else>
               <img class="img-fluid"
                    :class="{'shadow-sm': sdg == n}"
                    :src="'resources/SDG 2018 dashboards white-' + n + '.png'"
                    alt="" />
              <div class="not-available-icon text-center text-uppercase d-flex justify-content-center align-items-center text-white">
                Not Available
              </div>
             </div>
          </div>
          <div class="col-lg col-custom-9 col-md-2 col-sm-3 col-3 px-1 mb-2">
             <div class="sdg-dashboard bg-secondary">
               <router-link :to="link(0)"
                            class=""
                            >
                 <img class="img-fluid"
                      src="resources/SDG 2018 dashboards white-18.png"
                      alt="" />
                </router-link>
             </div>
          </div>
        </div>

      </div>

    </template>

    <template id="indicator-vue-template">
      <div class="" >

          <div class="row">
            <div class="col-lg-6 mb-4">
              <h5 class="card-title"><span v-html="indicator.title"></span> <span class="text-muted">(<span v-html="$root.$options.filters.units(indicator.units)"></span>)</span></h5>
              <p><strong>Definition</strong>: <span v-html="indicator.description" class="text-muted"></span></p>
              <p><strong>Data year</strong>: <span class="text-muted">{{ indicator.year }}</span></p>
              <p><strong>Source</strong>: <span class="text-muted">{{ indicator.source }}</span></p>

              <div class="small-bar-container"
                    :id="'bar-' + sdg + '-' + indicator.indicator"
                    role="tabpanel"
                    aria-labelledby="profile-tab">

                <bar-chart
                  :indicator="indicator.indicator"
                  :country_column_data="$root.country_column_data_sdg[sdg][indicator.indicator]"
                  :label="indicator.title"
                  :iso_focus="iso"
                  :iso_hover="$root.iso_hover"
                  :behavior="behavior"

                ></bar-chart>

              </div>

            </div>

            <div class="col-lg-6">

              <ul class="nav nav-tabs"
                  :id="'indicator-' + sdg + '-' + indicator.indicator"
                  role="tablist">

                <li class="nav-item">
                  <a class="nav-link"
                      :class="{active: $root.focus == 'map'}"
                      :id="'indicator-' + sdg + '-' + indicator.indicator + '-map'"
                      data-toggle="tab"
                      :href="'#map-' + sdg + '-' + indicator.indicator"
                      role="tab"
                      :aria-controls="'map-' + sdg + '-' + indicator.indicator"
                      aria-selected="true"
                      @click="$root.focus = 'map'">Map</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link "
                      :class="{active: $root.focus == 'table'}"
                      :id="'indicator-' + sdg + '-' + indicator.indicator + '-bar'"
                      data-toggle="tab"
                      :href="'#bar-' + sdg + '-' + indicator.indicator"
                      role="tab"
                      :aria-controls="'bar-' + sdg + '-' + indicator.indicator"
                      aria-selected="false"
                      @click="$root.focus = 'table'">Table</a>
                </li>
                <li class="nav-item ml-auto">
                  <a class="nav-link mouse-pointer"
                      :id="'indicator-' + sdg + '-' + indicator.indicator + '-bar'"
                      @click="$root.download_indicator(sdg, indicator.indicator)"
                      role="tab"
                      aria-selected="false"><i class="fa fa-download"></i> Download</a>
                </li>

              </ul>
              <div class=""
                    :id="'content-indicator-' + sdg + '-' + indicator.indicator">

                <div class=""
                      v-show="$root.focus == 'map'"
                      :id="'map-' + sdg + '-' + indicator.indicator"
                      role="tabpanel"
                      :aria-labelledby="'indicator-' + sdg + '-' + indicator.indicator + '-map'">
                  <div id="small_map_container">
                    <sdg-map :sdg="sdg"
                             :indicator="indicator"
                             :iso="iso"
                             paint="indicator"
                             size="2"
                             :behavior="behavior"
                             :breakpoint="$root.breakpoint"

                    ></sdg-map>
                  </div>
                </div>

                <div class="state-table-detail"
                      v-show="$root.focus == 'table'"
                      :id="'bar-' + sdg + '-' + indicator.indicator"
                      role="tabpanel"
                      :aria-labelledby="'indicator-' + sdg + '-' + indicator.indicator + '-bar'">

                  <table class="table table-hover table-sm">
                    <thead>
                      <tr>
                        <th>Rank</th>
                        <th>State</th>
                        <th>Value</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr v-for="(state, index) in $root.country_column_data_sdg[sdg][indicator.indicator].labels"
                          @mouseover="$root.iso_hover = $root.country_column_data_sdg[sdg][indicator.indicator].isos[index]">
                        <td>{{ index + 1 }}</td>
                        <td>
                          <router-link :to="'/SDG/' + sdg + '/' + $root.country_column_data_sdg[sdg][indicator.indicator].isos[index]">{{ state }}</router-link>
                        </td>
                        <td :class="'border-color-' + $root.countries[$root.country_column_data_sdg[sdg][indicator.indicator].isos[index]].sdgs[sdg][indicator.indicator - 1].color">{{ $root.country_column_data_sdg[sdg][indicator.indicator].values[index] | decimals(indicator.decimals) }}</td>
                      </tr>
                    </tbody>
                  </table>

                </div>
              </div>

            </div>

          </div>

      </div>
    </template>

    <div id="app" :class="'page-' + page">

      <transition name="fade">
        <div class="loading d-flex" v-if="loading">
          <div class="loader">
            <i class="fas fa-cog fa-spin fa-7x"></i>
          </div>
        </div>
      </transition>

      <nav class="navbar navbar-light bg-white navbar-shadow d-flex">
        <div class="container">
          <router-link to="/"
                       class="navbar-brand"
                       >
             <div @click="current_sdg = 0"><span class="text-success font-weight-bold">Sustainable Development Report</span><br>
               <span class="text-info font-weight-bold">of the United States, 2018</span>
            </div>
          </router-link>
          <div class="d-flex align-items-center">
            <a href="http://unsdsn.org/" target="_blank"><img src="resources/SDSN_logo.png" class="logo1" alt="SDSN Logo"></a>

            <a href="https://www.sdgusa.org/" target="_blank"><img src="resources/SDG_USA_logo.png" class="logo2 ml-4" alt="SDG USA Logo"></a>
          </div>
        </div>
      </nav>

        <section id="map" class="bg-light">
          <div id="regions_div" class="text-center" style="height: 100%;">

            <sdg-map :sdg="current_sdg"
                     :paint="page"
                     :iso="current_iso"
                     size="1"
                     :breakpoint="breakpoint"

            ></sdg-map>

            <div class="legend legend-blue bg-white shadow-sm text-left p-3"
                 v-show="!current_sdg || page == 'landing'">
              <h6>State Index Score</h6>
              <div class="legend-item">
                <div class="legend-color bg-legend-blue3">&nbsp;</div>
                <div class="legend-name text-muted">&gt;75</div>
              </div>
              <div class="legend-item">
                <div class="legend-color bg-legend-blue2">&nbsp;</div>
                <div class="legend-name text-muted">50 - 75</div>
              </div>
              <div class="legend-item">
                <div class="legend-color bg-legend-blue1">&nbsp;</div>
                <div class="legend-name text-muted">40 - 50</div>
              </div>
              <div class="legend-item">
                <div class="legend-color bg-legend-blue0">&nbsp;</div>
                <div class="legend-name text-muted">&lt;40</div>
              </div>
              <div class="legend-item">
                <div class="legend-color bg-legend-bluenull">&nbsp;</div>
                <div class="legend-name text-muted">[information unavailable]</div>
              </div>
            </div>

            <div class="legend bg-white shadow-sm text-left p-3"
                 v-show="current_sdg && page != 'landing'" >
              <h6><small class="text-muted">SDG {{ current_sdg }}</small><br>
                <router-link :to="'/SDG/' + current_sdg">{{ sdg_titles[current_sdg] }}</router-link>
              </h6>
              <div class="legend-item">
                <div class="legend-color bg-green">&nbsp;</div>
                <div class="legend-name text-muted">Making progress towards SDGs</div>
              </div>
              <div class="legend-item">
                <div class="legend-color bg-yellow">&nbsp;</div>
                <div class="legend-name text-muted">Challenges remain</div>
              </div>
              <div class="legend-item">
                <div class="legend-color bg-orange">&nbsp;</div>
                <div class="legend-name text-muted">Significant challenges remain</div>
              </div>
              <div class="legend-item">
                <div class="legend-color bg-red">&nbsp;</div>
                <div class="legend-name text-muted">Major challenges remain</div>
              </div>
              <div class="legend-item">
                <div class="legend-color bg-gray">&nbsp;</div>
                <div class="legend-name text-muted">[information unavailable]</div>
              </div>
            </div>


          </div>

        </section>


      <!--
      ----------------------------------------------------
      ----------------------------------------------------
        LANDING PAGE
      ----------------------------------------------------
      ----------------------------------------------------
      -->

      <transition name="fade">
      <div v-show="page == 'landing'" >

          <div class="container">

            <div class="bg-almost-white country-list paper">

              <div class="mb-5">

                <h4>The Sustainable Development Goals</h4>
                <hr>

                <p class="text-muted">Select one of the 15 available SDGs to see its indicators in detail</p>

                <div class="mb-4">

                  <sdg-icons :sdg="current_sdg"><sdg-icons>

                </div>

            </div>

            <h4 class="mb-4">The SDG Index</h4>

            <p class="text-muted d-flex"><span>Select a state to see its full profile</span>
              <input type="text"
                      v-model="search"
                      class="form-control search-input ml-auto"
                      placeholder="Search state..."/>
                    </p>

            <div class="table-responsive">

              <table class="table table-hover">

                <thead>
                  <tr>
                    <th @click="sortOrder('abc')"
                        class="clickable-column">State
                      <span class="fa"
                            v-show="sort_by == 'abc'"
                            :class="{ 'fa-sort-up' : !sort_direction,
                                      'fa-sort-down' : sort_direction }"></span>
                    </th>
                    <th class="">SDGs</th>
                    <th @click="sortOrder('rank')"
                        class="clickable-column rank-column">Rank
                      <span class="fa"
                            v-show="sort_by == 'rank'"
                            :class="{ 'fa-sort-up' : !sort_direction,
                                      'fa-sort-down' : sort_direction }"></span>
                    </th>
                    <th class="rank-column">Score</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="(country, index) in orderedCountries">
                    <td>
                      <router-link :to="'/' + country.iso"
                                   class="country-link">
                            {{ country.name }}</router-link>
                    </td>
                    <td class="text-muted">
                      <div class="sdgs-wrapper">
                        <div v-for="(sdg,n) in country.score_sdgs"
                              v-if="sdg > 0"
                              v-on:mouseover="tooltipSDG($event,sdg,compute_index(n))"
                              v-on:mouseout="hideTooltipSDG"
                              @click="goToCountrySDG(country.iso, compute_index(n)+1)"
                              class="sdg-bar text-white"
                              :style="{'width': (sdg / 15) + '%'}"
                              :class="'bg-sdg' + (compute_index(n)+1)">&nbsp;</div>
                      </div>
                    </td>
                    <td class="text-muted">{{ country.global_index_rank | numberOrNull }}</td>
                    <td class="text-muted">{{ country.global_index_score | numberOrNull }}</td>
                  </tr>
                </tbody>

             </table>

             </div>

          </div>

      </div>

    </div>

    </transition>

    <!--
    ----------------------------------------------------
    ----------------------------------------------------
      STATE PROFILE
    ----------------------------------------------------
    ----------------------------------------------------
    -->

      <transition name="goup">
      <div class="container country-profile"
           v-show="page == 'country'">

              <div v-if="current_iso" class="paper">

                <header class="country-header bg-almost-white">
                <div class="d-md-flex justify-content-between flex-row-reverse">

                  <div class="country-search d-flex d-md-block">

                    <div class="dropdown flex-grow-1">
                      <input type="text"
                              v-model="search"
                              class="form-control search-input"
                              placeholder="Search state..."
                              id="dropdownCountries"
                              data-toggle="dropdown"
                              aria-haspopup="true"
                              aria-expanded="false"/>
                      <div class="dropdown-menu dropdown-countries" aria-labelledby="dropdownCountries">
                          <router-link v-for="(country, index) in filteredCountries"
                                       :to="current_sdg ? '/' + country.iso + '/' + current_sdg: '/' + country.iso"
                                       :key="country.iso"
                                       class="list-group-item list-group-item-action dropdown-item">{{ country.name }}</router-link>
                      </div>
                    </div>

                    <div class="text-right mt-2 d-none d-md-block">
                      <small>
                        <router-link to="/">USA: All States Index Scores</router-link>
                      </small>
                    </div>

                    <router-link to="/" class="btn btn-info text-white d-block d-md-none ml-2 p-0 px-1">
                      <img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjMycHgiIGhlaWdodD0iMzJweCIgdmlld0JveD0iMCAwIDgwMC42ODUgODAwLjY4NSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgODAwLjY4NSA4MDAuNjg1OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPHBhdGggZD0iTTgwMC4xOTYsMjQ4LjA3NmMtMC4wNzktMC4xMDgtMC4yMDUtMC4yMDYtMC4zMTgtMC4zMTFjLTYuMzkxLTYuMDIyLTUwLjE1OS0yLjI3NS01MC4xNTktMi4yNzVzLTAuMjcxLDAuOTMyLTAuOTY5LDIuMjc1ICAgYy0xLjQ4NSwyLjg1OS00LjkzNiw3LjYwOC0xMS45NzksOS4zNzNjLTEwLjM1NCwyLjU4Ni0xNTcuOTA4LDUuMTcyLTE2MS43OTEtNS4xODFjLTAuNjUzLTEuNzUtMS44MTgtMy4xMDQtMy4yNTgtNC4xOTIgICBjLTcuMDYzLTUuMzM1LTIxLjMzNC0zLjU3Mi0yMS4zMzQtMy41NzJzLTEuMTA2LDEuNDY4LTIuODkyLDMuNTcyYy00LjAyNyw0Ljc0OS0xMS41MzgsMTIuNzUyLTE3LjgxNywxNC41NDUgICBjLTcuMDEzLDIuMDA1LTguNTg1LTYuODQtNy43NDUtMTQuNTQ1YzAuMjQ1LTIuMjQ3LDAuNjg4LTQuNDA1LDEuMjcxLTYuMTZjMS44MTItNS40MzgtMTUuNDI4LTI0LjIwNS0yOS45MTgtMzMuNjMyICAgYy02LjE5Mi00LjAyNS0xMS44OTMtNi4zNjEtMTUuMzgyLTUuMTk4Yy0xMS42NDcsMy44ODMtNzIuNDg3LTE5LjQxNC03Mi40ODctMTkuNDE0SDE5My4yMTRIMjguNzYzYzAsMC0wLjc5Miw4LjI2MS0yLjE0NywxNS40NjEgICBjLTAuMTI3LDAuNjY3LTAuMjU3LDEuMzItMC4zOTMsMS45NjNjLTAuNjM4LDMuMDIxLTEuMzc2LDUuNjg3LTIuMjA3LDcuMTg4Yy0wLjU0LDAuOTgxLTEuMTE3LDEuNDc0LTEuNzIyLDEuMjcgICBjLTAuNTU2LTAuMTg0LTEuMzY3LTAuNjUzLTIuMzI3LTEuMjdjLTUuNzUxLTMuNjkxLTE3LjQ1OC0xMy4zMzUtMTkuNjgtNy43OWMtMC43MDksMS43NzEtMC4wMzUsNC41MzMsMS4yNzksNy43OSAgIGMzLjQ5NSw4LjY1LDExLjY2NCwyMC45MzUsMTEuNjY0LDI4LjQ1MmMwLDEuNjU0LDAsNS42ODUsMCwxMS4zNGMwLDYuNDUzLDAsMTUuMDE5LDAsMjQuNjE1YzAsMTIuMzU0LDAsMjYuMzk0LDAsMzkuNzkgICBjMCw4LjY5OCwwLDE3LjExMywwLDI0LjYxNWMwLDEzLjQxOCwwLDIzLjkwOSwwLDI3Ljc4MWMwLDUuMDUyLDMuMjY1LDguNjQsNy4zNTgsMTIuMDA5YzcuNDM1LDYuMTI3LDE3LjYxLDExLjU0NiwxNS45MzksMjMuNzY4ICAgYy0wLjAzOSwwLjI4NC0wLjA0NSwwLjU2NC0wLjA2OSwwLjg0N2MtMS4yMTcsMTQuNDIyLDE2LjQ3MiwyOS41MzIsMjguNzQyLDM5Ljc5YzMuNjQ5LDMuMDUxLDYuODIyLDUuNjc2LDguODY1LDcuNzE5ICAgYzMuNzc0LDMuNzc1LDkuMTE5LDEwLjQ2NywxNC42MzIsMTYuODk1YzcuNzI3LDkuMDE0LDE1Ljc4NCwxNy41MTQsMjAuMzE1LDE2Ljc2MmM3Ljc2Ni0xLjI5NSwyMi4wMDUtNi40NzUsMzEuMDY1LDMuODgzICAgYzcuNTYsOC42NDMsNDIuMTUyLDE3LjI3Myw1OS40MTMsMTkuMTQ2aDkuOTRjOS44MzItMS4zMTYsMzUuNDU2LTQuODY3LDUwLjQ1NywwYzUuNTIsMS43OTMsOS42MDQsNC43MTksMTAuOTE5LDkuMzI2ICAgYzEuNTI4LDUuMzQ2LDQuMzA4LDEwLjU2Niw3LjQ0OSwxNS4yODljNy41MDksMTEuMjc5LDE3LjE0MiwxOS42NTgsMTcuMTQyLDE5LjY1OHM2LjQ3NS0xMC4zNTQsMTAuMzU2LTE4LjEyMSAgIGMwLjI5Ny0wLjU5NiwwLjY4Ny0xLjEwNCwxLjEzOC0xLjUzN2MyLjE4LTIuMTA0LDYuMDQxLTIuMzEyLDEwLjQzLDBjNi42MzIsMy40OTYsMTQuNDYsMTIuNzYsMTkuNDk4LDMwLjAxNiAgIGMxLjAxMywzLjQ3NywyLjM5Niw2LjcyMyw0LjAyNSw5Ljc3M2M1LjcsMTAuNjc0LDE0LjU5OCwxOC44MjgsMjIuNzk4LDI0LjYxM2MxMC40NjUsNy4zODMsMTkuNzczLDEwLjkxMiwxOS43NzMsMTAuOTEyICAgczAtNC41NDcsMC4wODMtMTAuOTEyYzAuMDkzLTcuMTkxLDAuMjkxLTE2LjY5NywwLjcxNC0yNC42MTNjMC4xMzktMi42MTMsMC4zMDItNS4wNjIsMC40OTUtNy4xODggICBjMS4yOTQtMTQuMjM0LDQ0LjAwOS0yNy4xODIsNTEuNzczLTI4LjQ3OWM3Ljc2OC0xLjI5Myw1OS41NDEsMjIuMDA4LDU5LjU0MSwxNC4yNDRjMC02LjUyMSw4LjIyNi0xMi4xMzksMTcuNzU1LTE4LjM2NyAgIGMxLjgyLTEuMTg5LDMuNjgxLTIuMzk2LDUuNTQ3LTMuNjQxYzQuMTE2LTIuNzQ4LDkuMjA0LTAuMzA5LDE0LjExNCwzLjY0MWM4Ljk5NSw3LjIxOSwxNy40MDQsMTkuNSwxOC4yNCwxNC40ODQgICBjMS4yOTMtNy43NzEsMjUuODktMy44ODMsMjguNDc2LDUuMTc0YzEuNTI0LDUuMzQ0LDMuNDk3LDEyLjkzOCw0LjU5OSwyMC4xMzFjMC43NjcsNC45OTgsMS4xMDgsOS44MTEsMC41ODMsMTMuNTI1ICAgYy0wLjM2MywyLjU0NSwxLjMxNSw2LjYyNyw0LjAwNywxMS4wODZjNi44ODcsMTEuNDIsMjAuMzgzLDI1LjM1NSwyMy4xNzYsMjIuNTYyYzEuNzA2LTEuNzAzLDMuNjY0LTExLjQzNCw0LjQ0Mi0yMi41NjIgICBjMC41ODMtOC4zNDYsMC40OS0xNy40NzUtMC44Ni0yNC42MTFjLTAuOTQ0LTQuOTc1LTIuNDk2LTguOTgyLTQuODc4LTExLjA2OGMtNC42MDQtNC4wMjktOC4xOC0xNS45OTItOS44MjktMjguNzIxICAgYy0xLjEwOC04LjYwMi0xLjM0Mi0xNy41MjktMC40MDctMjQuNjE5YzAuNzkxLTYuMDE0LDIuNDItMTAuNjkzLDUuMDYxLTEyLjY3NGM0LjA2OC0zLjA1MSwxOC41MTItMTQuMjgxLDMzLjY5My0yNy4xMTMgICBjOS42MDYtOC4xMjEsMTkuNTEzLTE2Ljg4MSwyNy4yNjgtMjQuNjEzYzExLjE5OS0xMS4xNjQsMTcuOTI2LTIwLjE5MiwxMi44MTQtMjIuMDUxYy04LjM2Ni0zLjA0NS05LjU2Mi04Ljc5OS04LjYxNS0xNy43MzkgICBjMC42NjQtNi4yNjQsMi4zNzEtMTQuMDc4LDMuNDM2LTIzLjY3N2MwLjAzOS0wLjMzNCwwLjA4Ni0wLjYyMywwLjEyOS0wLjkzOGMyLjkxNS0yMS41NTQsMTguMDg2LDQuMzkyLDI0LjQ3NC0yNC45NTQgICBjMS4zNDEtNi4xNzUsNC44MTctMTEsOS4zOTMtMTQuODM2YzE3LjQ2MS0xNC42NTYsNTEuMTI0LTE0LjcxLDQ0Ljk2Ni0xOC44MTNjLTEuODk2LTEuMjcxLTMuMjUzLTMuMzIyLTQuMDY2LTUuODAyICAgYy0yLjUxNC03LjY0MiwwLjEzNi0xOS40MDIsNy45NDktMjUuMjY0YzQuMDA2LTMuMDAxLDEyLjA2Ny04LjUxNSwyMC4xNDgtMTQuNTI2Qzc5MC40NjksMjYyLjgzNyw4MDMuMzc1LDI1Mi4wNDYsODAwLjE5NiwyNDguMDc2ICAgeiIgZmlsbD0iI0ZGRkZGRiIvPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" />

                    </router-link>

                  </div>

                  <div>
                    <h1 class="country-name">
                      <span>
                        <img :src="'resources/flags/png/' + country.iso.toLowerCase() + '.png'"
                           class="flag">
                           {{ country.name }}</span>

                    </h1>
                    <h5 class="text-muted region-name" v-if="current_sdg">{{ sdg_titles[current_sdg] }}</h5>
                    <h5 class="text-muted region-name" v-else>&nbsp;</h5>
                  </div>

                </div>
                <hr class="mb-0">
                </header>

                <div class="country-content bg-almost-white">

                <div class="row">
                  <div class="col-md-5 mb-4">

                    <select v-model="current_sdg"
                            class="form-control"
                            @change="goToCountrySDG(current_iso, current_sdg)">
                      <option value="0">All SDGs</option>
                      <option v-for="(value, key) in sdg_titles"
                              :value="key"
                              :disabled="key == 14 || key == 17">SDG {{key}}: {{ value }}</option>
                    </select>

                    <div class="sdgchart-container mt-5 mb-4">

                      <polar-chart :country="country"
                                   :country_column_data="country_column_data"
                                   :sdg="current_sdg"
                                   :breakpoint="$root.breakpoint"

                      ></polar-chart>

                    </div>

                    <div class="text-center">
                      <small class="text-muted"><em>Click on a segment to display that SDG data</em></small>
                    </div>

                  </div>
                  <div class="col-md-7">

                    <label class="col-form-label mb-3" v-if="current_sdg">SDG {{ current_sdg }}: {{ sdg_titles[current_sdg] }}</label>
                    <label class="col-form-label mb-3" v-else>All SDGs</label>

                    <div class="no-colors">
                      <sdg-icons :sdg="current_sdg"><sdg-icons>

                    </div>

                    <div class="mb-4">
                      <small class="text-muted"><em>Select a goal here to see {{ country.name }} performance on that SDG</em></small>
                    </div>

                    <div class="shadow-sm bg-white">

                      <ul class="nav nav-justified nav-cs row">
                        <li class="text-center col-6" role="presentation">
                          <div class="nav-link px-1">
                            <div class="text-muted mb-1">State rank</div>
                            <div class="item-total">{{ current_sdg ? country.rank_sdgs[current_sdg_index] : country.global_index_rank | numberOrNull }}</div>
                            <div class="item-diff text-muted">(of {{ total_countries }})</div>
                          </div>
                        </li>
                        <li class="text-center col-6" role="presentation">
                          <div class="nav-link px-1">
                            <div class="text-muted mb-1">State score</div>
                            <div class="item-total">{{ current_sdg ? country.score_sdgs[current_sdg_index] : country.global_index_score | numberOrNull }}</div>
                            <div class="item-diff"
                                v-show="country.global_index_score"
                                 :class="{'text-success': current_sdg ? country.score_sdgs[current_sdg_index] > sdg_average() : country.global_index_score > sdg_average(),
                                          'text-danger': current_sdg ? country.score_sdgs[current_sdg_index] < sdg_average() : country.global_index_score < sdg_average(),
                                          'text-muted': current_sdg ? country.score_sdgs[current_sdg_index] == sdg_average() : country.global_index_score == sdg_average()}">
                              <i class="fas"
                                :class="{'fa-arrow-up': current_sdg ? country.score_sdgs[current_sdg_index] > sdg_average() : country.global_index_score > sdg_average(),
                                         'fa-arrow-down': current_sdg ? country.score_sdgs[current_sdg_index] < sdg_average() : country.global_index_score < sdg_average(),
                                         'fa-arrow-right': current_sdg ? country.score_sdgs[current_sdg_index] == sdg_average() : country.global_index_score == sdg_average()}"
                              ></i> {{ (1 - (current_sdg ? country.score_sdgs[current_sdg_index] : country.global_index_score) / sdg_average()) | percentage }} than average
                            </div>
                          </div>
                        </li>
                        <!-- <li class="text-center col-lg-4 col-6" role="presentation">
                          <div class="nav-link px-1">
                            <div class="text-muted mb-1">Average score</div>
                            <div class="item-total">{{ sdg_average() | numberOrNull }}</div>
                          </div>
                        </li> -->
                      </ul>

                      <div class="chart-container">
                        <bar-chart :country="country"
                                   :rank="current_sdg ? country.rank_sdgs[current_sdg_index] : country.global_index_rank"
                                   :country_column_data="current_sdg ? country_column_data_sdg[current_sdg].globals : country_column_data"
                                   :label="current_sdg ? sdg_titles[current_sdg] : 'Global Index Score'"
                                   :average="sdg_average() | numberOrNull"
                        ></bar-chart>
                      </div>

                    </div>

                    <div class="mt-2">
                      <small class="text-muted"><em>Click on a bar to select another U.S. State</em></small>
                    </div>

                  </div>

                </div>

                <h3 class="mt-4">Performance by Goal and Indicator: {{ country.name }}</h3>

                <hr>

                <div class="shadow-sm bg-white"
                     v-show="current_sdg > 0 && current_sdg <= 17">
                     <div class="row">
                       <div class="col-md-2 pr-md-0">
                         <div :class="'bg-' + country.color_sdgs[current_sdg_index]" class="h-100 pr-2">
                           <img class="img-fluid"
                                v-if="current_sdg"
                                :src="'resources/SDG 2018 dashboards white-' + current_sdg + '.png'"
                                alt="">

                         </div>
                       </div>
                       <div class="col-md-10 pl-md-0">
                         <div class="" v-if="current_sdg > 0">
                         <h5 class="sdg_title pt-3 pb-2 d-flex mb-0 justify-content-between">

                           <div class="ml-2">

                               SDG {{ current_sdg }}: {{ sdg_titles[current_sdg] }}
                               <br><small class="text-muted">Score: {{ country.score_sdgs[current_sdg_index]}}</small>


                           </div>
                           <div class="mr-3">
                             <router-link :to="'/SDG/' + current_sdg"
                                           class="btn btn-outline-secondary"
                             ><i class="fa fa-external-link-alt"></i> SDG {{ current_sdg }}: all States</router-link>
                           </div>

                         </h5>
                         <ul class="list-group list-group-flush indicator-list">
                           <li class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
                               :class="{'list-group-item-info': current_indicator == index + 1}"
                               v-for="(indicator, index) in sdgs[current_sdg].indicators"
                               v-if='showValue(country.sdgs[current_sdg][index].value)'
                               @click="current_indicator = index + 1">
                             <div>
                               <span v-html="indicator.title"></span>
                               <span class="text-muted">(<span v-html="$root.$options.filters.units(indicator.units)"></span>)</span>
                             </div>
                             <span class="text-muted text-right indicators">{{ country.sdgs[current_sdg][index].value| decimals(sdg.indicators[index].decimals) }} &nbsp;
                               <span class="badge badge-pill"
                                     :class="'bg-' + country.sdgs[current_sdg][index].color">&nbsp</span>

                             </span>
                           </li>
                         </ul>
                         </div>
                       </div>
                     </div>

                </div>

                <div v-if="current_indicator && typeof sdgs[current_sdg].indicators[current_indicator - 1] !== 'undefined'"
                      class="card mt-4 shadow-sm">
                  <div class="card-body py-0">
                    <indicator
                               :indicator="sdgs[current_sdg].indicators[current_indicator - 1]"
                               :sdg="current_sdg"
                               :iso="current_iso"
                               class="mt-4"

                    ></indicator>
                  </div>
                </div>

                <p v-show="!current_sdg || current_sdg > 17">Select an SDG to see its group of indicators</p>

              </div>

            </div>

      </div>
    </transition>

    <!--
    ----------------------------------------------------
    ----------------------------------------------------
      SDG PROFILE
    ----------------------------------------------------
    ----------------------------------------------------
    -->

      <transition name="goup">
      <div class="container country-profile"
           v-if="page == 'sdg'">

              <div v-if="current_sdg" class="paper">

                <header class="country-header sdg-header bg-almost-white">
                <div class="row">

                  <div class="col-lg-7">
                    <h1 class="sdg-name d-flex">

                      <div class="sdg-title-icon mr-3"
                           :class="'bg-sdg' + current_sdg">

                          <img class="img-fluid"
                               :src="'resources/SDG 2018 dashboards white-' + current_sdg + '.png'"
                               :alt="sdg_titles[current_sdg]">

                      </div>
                      <div class="country-letters">
                        <small class="text-muted h5">Sustainable Development Goal {{ current_sdg }}
                          <button class="btn btn-sm btn-outline-secondary ml-3"
                                  @click="download_sdg(current_sdg)"><i class="fa fa-download"></i> Download</button></small><br>
                        <span>{{ sdg_titles[current_sdg] }} <span v-if="iso_focus" class="text-muted">({{ countries[iso_focus].name }})</span></span>
                      </div>
                    </h1>
                  </div>

                  <div class="col-md-5 small-sdgs-container d-none d-lg-block">
                    <div id="small-sdgs">
                      <sdg-icons :sdg="current_sdg" ><sdg-icons>
                    </div>
                  </div>

                </div>

                <hr class="mb-0 mt-2">

                </header>

                <div class="country-content bg-almost-white">

                  <div class="sdg-icons-container-parent mb-4">

                    <div id="sdg-icons-container">
                      <sdg-icons :sdg="current_sdg" ><sdg-icons>
                    </div>

                  </div>

                  <div class="mb-4">
                    <!-- <p>Select an indicator  </p> -->
                      <!-- <div class="list-group">

                          <router-link :to="'#indicator-' + indicator.indicator"
                                        @click.native="scrollFix('#indicator-' + indicator.indicator)"
                                        v-for="indicator in sdg.indicators"
                                        class="list-group-item list-group-item-action"><span v-html="indicator.title"></span></router-link>

                      </div> -->


                    <div class="form-group row">
                      <label class="col-sm-2 col-form-label" for="indicator-selector">Select an indicator</label>
                      <div class="col-sm-10">
                        <select class="form-control"
                                id="indicator-selector"
                                @change="selectScroll($event)">
                          <option v-for="indicator in sdg.indicators"
                                  :value="indicator.indicator"
                                  v-html="indicator.title"></option>
                        </select>
                      </div>
                    </div>

                    <hr>

                  </div>

                  <div class="row">
                    <div v-for="indicator in sdg.indicators"
                          class="col-12 mb-4"
                           :id="'indicator-' + indicator.indicator">

                      <indicator :indicator="indicator"
                                 :sdg="current_sdg"
                                 :iso="iso_focus"
                                 behavior="iso_focus"
                      ></indicator>

                      <hr>

                    </div>
                  </div>

                </div>

            </div>

      </div>
    </transition>

    <div class="sdg-tooltip" id="sdg-tooltip" v-show="page == 'landing'"></div>

    <div class="sdg-tooltip" id="icon-tooltip" v-show="page == 'country'"></div>

    </div>

    <footer class="bg-light my-0">
      <div class="container p-2 px-5 my-0">

        <div class="d-flex justify-content-between">
          <div class="">
            <a class="btn btn-info" href="http://www.sdgusa.org">Return to www.sdgusa.org</a>
          </div>

          <div class="ml-auto d-none d-md-block">
            <a class="btn btn-secondary" href="/data/SDGUSA.xlsx" target="_blank"><i class="fa fa-download"></i> Download Complete Dataset</a>
          </div>
        </div>

        <div class="text-center logos">
          <a href="http://www.pica-publishing.com/" target=”_blank”><img class="logo1" src="resources/pica_logo.png"/></a>
          <a href="http://onetandem.com/en/?utm_source=datavis&utm_medium=referral&utm_campaign=pica" class="ml-4" target=”_blank”><img class="logo2" src="resources/ot_logo.png"/></a>
        </div>

      </div>
    </footer>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"
    ></script>

    <script src="components/map.js"></script>
    <script src="components/sdg-icons.js"></script>
    <script src="components/bar-chart.js"></script>
    <script src="components/polar-chart.js"></script>
    <script src="components/indicator.js"></script>

    <script src="script.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
  </body>
</html>
